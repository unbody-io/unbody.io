---
title: Unbody
---
import {notionPageIds} from "../lib/config";
import { useSSG } from 'nextra/ssg'
import NewHero from "../containers/NewHero/NewHero";
import {getBlocks, getDatabase} from "../lib/notion";
import {getDatabasePropsValue, getSectionTitle} from "../lib/utils.notion";
import InfoSection from "../containers/InfoSection/InfoSection";
import {Render} from "@9gustin/react-notion-render";
import DisplaySection from "../containers/DisplaySection/DisplaySection";
import Tabs from "../components/Tabs/Tabs";
import FeaturePanel from "../components/FeaturePanel/FeaturePanel";
import ActionButtonGroup from "../containers/ActionButtonGroup/ActionButtonGroup";
import SourceList from "../containers/SourceList/SourceList";
import UseCases from "../containers/Usecases/Usecases";

export const getStaticProps = async (context) => {
    const records = await getDatabase(notionPageIds.LANDING);
    const sections = await Promise.all(
        records.map(async (page) => ({
            page,
            key:
                (
                    "properties" in page
                    && "rich_text" in page.properties.label
                    && page.properties.label.rich_text[0]
                )
                    ? (page.properties.label.rich_text[0].plain_text || null) : null,
            content: await getBlocks(page.id)
        }))
    )

    const features = await getDatabasePropsValue(notionPageIds.FEATURES, {
        key: null,
        benefits: null,
        video: null,
        title: null,
        slug: null,
        order: null,
        disabled: null
    })

    const providers = await getDatabasePropsValue(notionPageIds.PROVIDERS, {
        name: null,
        tags: null,
        status: null,
        copy_description: null,
        logo: null,
        order: null,
        supported_files: null,
        supported_file_types: null,
    })

    const files = await getDatabasePropsValue(notionPageIds.FILES, {
        name: null,
        formats: null,
        status: null,
        copy_description: null,
        logo: null,
        order: null,
        supported_providers: null,
    })


    const useCases = await getDatabasePropsValue(notionPageIds.USECASES, {
        title: null,
        outline: null,
        link: null,
        order: null
    })

    return {
        props: {
            ssg: {
                providers: providers.sort((a,b) => (a.order||1)-(b.order||10)),
                files: files.sort((a,b) => (a.order||10)-(b.order||10)),
                features: features.sort((a,b) => (a.order||10)-(b.order||10)),
                useCases: useCases.sort((a,b) => (a.order||10)-(b.order||10)),
                sections: sections
                    .filter((s => s.key))
                    .reduce(
                        (obj, item) => Object.assign(obj, {[item.key]: item}), {})
            }
        },
    revalidate: 10
}
}

export const PageContent = () => {
    const {sections, features, providers, files, useCases} = useSSG();
    //@ts-ignore
    const headline = sections.moto.content[0].paragraph.rich_text[0].plain_text
    //@ts-ignore
    const description = sections.description.content[0].paragraph.rich_text[0].plain_text

    return (
        <>
            <InfoSection label={"WHY"}
                         title={getSectionTitle(sections.why) || ":("}
                         learnMoreLink={"/docs"}
                         learnMoreAlt={"Learn more"}
            >
                <Render blocks={sections.why.content}/>
            </InfoSection>
            <InfoSection label={"HOW"}
                         title={getSectionTitle(sections.how) || ":("}
                         learnMoreLink={"/docs"}
                         learnMoreAlt={"Learn more"}
            >
                <Render blocks={sections.how.content}/>
            </InfoSection>
            <DisplaySection label={"features"}
                            title={`Super Powers âœ¨<br/>â†¯<br/>All you need, right out-of-the-box`}
            >
                <Tabs tabs={
                    features.map(f => {
                        return {
                            id: f.key,
                            title: f.key,
                            content: (
                                <FeaturePanel data={f} key={f.key}/>
                            )
                        }
                    })
                }/>
            </DisplaySection>
            <DisplaySection label={"Providers"}
                            title={`Flexible ðŸŒŠ<br/>â†¯<br/>Use the apps and files you love`}
                            className={"providers"}
            >
                <SourceList data={
                    providers.map(p => ({
                        name: p.name,
                        type: "provider",
                        status: p.status,
                        logo: p.logo,
                        copy_description: p.copy_description,
                        tags: p.tags,
                        id: p.id
                    }))
                }
                            title={"Supported Providers"}
                />
                <SourceList data={
                    files.map(p => ({
                        name: p.name,
                        type: "file",
                        status: p.status,
                        logo: p.logo,
                        copy_description: p.copy_description,
                        tags: p.formats,
                        id: p.id
                    }))
                }    type={"file"} title={"Supported Files"}/>
                <div style={{textAlign: "center"}}>
                    <br/>
                    <ActionButtonGroup learnMoreLink={"/docs"}/>
                </div>
            </DisplaySection>
        </>
    )
}

<div className={"home-content"}>
    <div className="content-container">
        <NewHero/>
        <PageContent/>
    </div>
</div>
